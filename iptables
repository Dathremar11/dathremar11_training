https://tokmakov.msk.ru/blog/item/473?ysclid=m1dolutgxo530938626

Утилита iptables
Синтаксис утилиты iptables:

$ sudo iptables [-t таблица] команда [критерий действие]Копировать
Если таблица не указана, подразумевается таблица filter. Команды могут быть:

-A (или --append) — добавить правило в цепочку
-D (или --delete) — удалить правило из цепочки
-I (или --insert) — вставить правило в цепочку под указанным номером
-L (или --list) — вывести все правила для заданной цепочки
-F (или --flush) — очистить все правила для заданной цепочки (таблицы)
-N (или --new-chain) — создать новую цепочку
-X (или --delete-chain) — удалить цепочку
-P (или --policy) — установить действие по умолчанию для цепочк

Имеются следующие дополнительные опции:

-v (или --verbose) — увеличить подробность сообщений, при указании с командой --list будет выводиться имя интерфейса, параметры правил и маски TOS.
-n (или --numeric) — выводить ip-адреса и номера портов в числовом виде, предотвращая попытки преобразовать их в символические имена.
--line-numbers — показывать номера строк при отображении списка правил командой --list (номер строки соответствует позиции правила в цепочке).

Если верить man странице, то одно делает OR, а другая XOR. Маску можно указывать и для --set-mark и для --set-xmark.
И то и другое и маска имеет смысл при сложной маркировке пакетов, когда пакет сначала маркируется одним значением, а потом уточняется другим. За счёт маски можно в одном правиле выставить старшие разряды маркера, а в другом правиле выставить младшие разряды.

Уточнение происходит примерно так:

newmark = (ct->mark & ~info->ctmask) ^ info->ctmark;
if (ct->mark != newmark) {
    ct->mark = newmark;
    nf_conntrack_event_cache(IPCT_MARK, ct);
}
где ctmark — маркировка, ctmask — маска.
Единственное отличие mark от xmark — в случае с mark при установке 
значения ctmask оно ORится с ctmark, что в конечном счете обеспечивает 
установку заново для всех ненулевых битов ct->mark (а не XOR со старыми).

Еще пример:
4 OR 2 = 6
4 OR 4 = 4

iptables -t mangle -A -s 10.1.1.0/24 -j MARK --set-mark 0x100
...
iptables -t mangle -A -p icmp -j MARK --set-mark 0x01/0xff
iptables -t mangle -A -p tcp --syn -j MARK --set-mark 0x02/0xff